<polymer-element name="concept-element" attributes="concept chosenConcept">
  <template>
    <style>
      :host {
        display: inline-block;
      }

      .imgConcept {
        margin: 0 20px;
        width: 100px;
        padding: 12px 12px ;
        border-radius: 10px;
        float:left;
      }

      .imgConceptChosen {
        background:#E5CF39;
      }

      img:hover {
        background: #E5CF39;
      }

    </style>
    
    <span><img id="highlight" class="imgConcept" on-click="{{ setConcept }}" src="{{concept.src}}"></span>

  </template>

  <script>
    Polymer('concept-element', {
      highlight: false,
      setConcept: function(){

        // Fool push to work  
        var selfChosenConcept = this.chosenConcept;
        var notOneOfThree = 0;

        // Pushing and and no more than 3

        for (var i = 0; i < this.chosenConcept.length; i++) {
          
          if (this.concept.name == this.chosenConcept[i]) {
            // do nothing
          } else {
            notOneOfThree++;
          }
        }  

        if (notOneOfThree == 3) {  
          if (this.chosenConcept.length > 2) {
              selfChosenConcept.splice(0,1);
              selfChosenConcept.push(this.concept.name);
          } else {
          selfChosenConcept.push(this.concept.name);
          }
        }
          

                  
      },
      chosenConceptChanged: function() {
        var notOneOfThree = 0;
        
        for (var i = 0; i < this.chosenConcept.length; i++) {
          if (this.concept.name == this.chosenConcept[i]) {
             this.shadowRoot.getElementById('highlight').classList.add('imgConceptChosen');
          } 
          if (this.concept.name != this.chosenConcept[i]) {
            notOneOfThree++;
          }  
        }

        if (notOneOfThree == 3) {
          this.shadowRoot.getElementById('highlight').classList.remove('imgConceptChosen');
        } 


      }
    });
  </script>
</polymer-element>