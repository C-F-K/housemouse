<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../bower_components/firebase/firebase.js"></script>
<script src="../bower_components/firebase-simple-login/firebase-simple-login.js"></script>
<link rel="import" href="store-locally.html">

<polymer-element name="element-facebook-login" attributes="user">

<template>
	<div> 
    <button name="facebook-login" on-click="{{login}}">Login here!</button>
	</div>
  <store-locally user="{{user}}"></store-locally>
</template>

<script>
  Polymer('element-facebook-login', {
     	login:function () {
        var self = this;
        var firebaseRef = new Firebase("https://crackling-fire-9322.firebaseio.com");
        var auth = new FirebaseSimpleLogin(firebaseRef, function(error, user) {
          if (error) {
            alert(error);
          } else if (user) {
            self.user = {
              name: user.displayName,
              id: user.id,
              country: user.thirdPartyUserData.locale.split("_")[1]
            }
          }
        });
        auth.login('facebook');
           	}});
</script>
</polymer-element>
